[TOC]

摘自博客

http://www.52cs.org/?p=1290

[http://www.52cs.org/?p=1302](http://www.52cs.org/?p=1302)

 http://www.52cs.org/?p=1316

#分布式系统服务器性能需求包含以下几点：
1. 高吞吐

2. 高并发

3. 低延迟

4. 负载均衡

#系统提高承载能力的手段

1. 分层模型

简单的分层模型，接入逻辑处理，数据保存（网盘属于这种，简单的模型）

![tu3](F:\Documents\My Knowledge\temp\5a6e556e-8069-45e9-8850-17b6dea6c94b_files\0.24142306740395725.png)

2. 并发模型（多线程、异步）

3. 缓冲技术

![tu6](index_files/0.6127919941209257.png)

缓存方案和技术

Memcache

Coherence商业软件

4. 存储技术（NoSQL）

MangoDB

Redis

#分布式系统在可管理性上造成的问题

1. 硬件故障率

硬件故障在所难免，要有意识的设计一些冗余和自我维护的能力

2. 资源利用率优化

集群扩容缩容的时候需要考虑内存数据以，不妨碍用户使用，扩容缩容无状态的服务器是容易的，但是在网游服务器类似这种的有状态的服务器是比较困难的。

3. 软件服务内容更新

批量安装部署，服务端程序升级要考虑好，以免在之后的运维过程中造成麻烦，在升级是可能会遇到数据库升级或者修改表结构的问题，要有相应的处理方案。

4. 数据统计和决策

统计日志在系统内可能是一个庞大的数量级文件，要想好如何处理日志和做相应统计分析的工作。有必要掌握Google的map-reduce技术来处理分布式数据的统计。

![tu12](F:\Documents\My Knowledge\temp\5a6e556e-8069-45e9-8850-17b6dea6c94b_files\0.44851954956538975.png)

#解决分布式系统可管理性的基本手段

1. 目录服务（ZooKeeper）

![tu13](index_files/0.9273139436263591.png)

zookeeper是一个优秀的分布式数据保存系统。

目录服务是分布式系统中关键的组件之一。

2. 消息队列服务（ActiveMQ、ZeroMQ、Jgroups）

两台机器跨机通讯通常会使用tcp/dup协议，直接使用网络API方式编写接口跨进程通讯，当通讯机器发生故障无法工作或者通讯机器上的服务挂掉，将不可使用，这些包含了容灾扩展负载均衡等问题。

采用消息队列的方式更能简单方便的处理进程间通讯问题。

![tu14](index_files/0.4709290536120534.png)

3. 事务系统

分布式系统上解决事务问题，必须具备两个核心工具：一个是稳定的状态存储系统；另外一个是方便可靠的广播系统。

“分布式锁”，也就是一种能让各个节点先检查后执行的限制条件。如果我们有高效而单子操作的目录服务，那么这个锁状态实际上就是一种“单步事务”的状态记录，而回滚操作则默认是“暂停操作，稍后再试”。这种“锁”的方式，比事务的处理更简单，因此可靠性更高，所以现在越来越多的开发人员，愿意使用这种“锁”服务，而不是去实现一个“事务系统”。

4. 自动部署工具（Docker）

5. 日志服务（log4j）

日志功能：

开发调试、排除BUG的辅助。

在程序运行时可以用来了解程序情况的有效手段。

#分布式系统在开发效率上造成的问题和解决思路

1. 微服务框架：EJB、WebService

2. 异步编程工具：协程、Futrue、Lamda

3. 云服务模型：IaaS/PaaS/SaaS

#总结分布式系统问题的解决路径

**问题层次****问题内容****解决方案****互联网海量承载问题**提高吞吐量分层调用异步并发降低延迟缓存NoSQL**大量服务器管理问题**故障恢复和可扩展性分布式目录服务消息队列服务分布式事务系统运维便利性自动部署工具统一日志系统**开发效率问题**复杂的通信编程微服务框架异步编程工具大量功能模块需要分工搭建IaaS/PaaS/SaaS云服务